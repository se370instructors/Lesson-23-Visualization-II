---
title: "Untitled"
author: "YOUR NAME HERE"
date: "2/28/2020"
output: html_document
---

This is a shell file for your ggplot exercise. Follow the prompts below and knit the document for homework.

## Problem 1: Loading and exploring data

Run the below code to load and expore the flights data:

```{r}
flights <- read.csv('Flight_Data_JAN18_Southwest_EastCoast.csv')
flights <- flights[is.na(flights$DEP_DELAY) == FALSE, ]

head(flights)
```

Write code to output the names of the columns in the `flights` data here:

```{r}

colnames(flights)
```

Write code to output the number of rows in the `flights` data here:

```{r}
nrow(flights)
```

## Problem 2: Plotting delays

Create a histogram of delays using `ggplot`. Hint: lookup what `geom` you can use to make a histogram

```{r}
library(ggplot2)

ggplot(data = flights, aes(x = DEP_DELAY)) + geom_histogram()
```

Create a density plot of the same data.

```{r}
ggplot(data = flights, aes(x = DEP_DELAY)) + geom_density()
```

Separate the delays that are \<=1 hour from the delays that are \>1 hour. Create two separate histograms -- one for the shorter delays and one for the longer delays. Is it more beneficial/insightful now that you have two plots instead of one?

```{r}
long <- flights %>%
  filter(DEP_DELAY > 60)

ggplot(data = long, aes(x = DEP_DELAY)) + geom_histogram()
```

```{r}
short <- flights %>%
  filter(DEP_DELAY <= 60)

ggplot(data = short, aes(x = DEP_DELAY)) + geom_histogram()
```

## Problem 3: Plotting Delays by Origin

Create a density plot that shows delays from BWI and GSP on the same ggplot:

Make BWI = blue and GSP = red.

```{r}
bwi <- flights %>% 
  filter(ORIGIN == "BWI")
gsp <- flights %>%
  filter(ORIGIN == "GSP")


ggplot() + geom_density(data = bwi, aes(x = DEP_DELAY), color = "blue") + geom_density(data = gsp, aes(x = DEP_DELAY), color = "red")
```

## Problem 4: Facets

Use `facet_wrap()` to create a plot showing the density of DEP_DELAY for all DEST_CITY_NAME.

```{r}
ggplot(data = flights, aes(x = DEP_DELAY)) + geom_density() + facet_wrap(~DEST_CITY_NAME) 
```

Now, re-do the plot with delays \> 60 minutes filtered out...(only delays 1 hour or less included)

```{r}
short_2 <- flights %>%
  filter(DEP_DELAY <= 60)

ggplot(data = short_2, aes(x = DEP_DELAY)) + geom_density() + facet_wrap(~DEST_CITY_NAME) 
```

## Problem 5: Titles and Aesthetics

Go back and make sure every plot has the following:

1.  A centered title that describes what the chart is
2.  Axis titles that are descriptive not all caps or all lowercase
3.  Change the color of your lines/bars to something different

## Bonus Problem

Make a "dumbbell plot" that shows the min, max, and average `DEP_DELAY` based on the `ORIGIN_CITY_NAME`. Be sure to do the following:

1.  Use `dplyr` to do the necessary data manipulation so that you have min, max, and average departure delay by origin city
2.  Plot the minimum departure delay as a BLUE point.
3.  Plot the maximum departure delay as a RED point.
4.  Plot the average departure delay with a different marker ("point shape").
5.  Use a segment/line to connect the in delay to the max delay.

*HINT: Google "dumbbell plot ggplot2" and see where it leads you! This is similar to the plot we ask for in \#2 of the problem set.*

```{r}
bonus <- flights %>%
  group_by(ORIGIN_CITY_NAME) %>%
  summarise(max_dep = max(DEP_DELAY), min_dep = min(DEP_DELAY), avg_delay = mean(DEP_DELAY))

ggplot(data = bonus, aes(x= ORIGIN_CITY_NAME, y = avg_delay)) + geom_point(shape = 3) + geom_point(aes(x = ORIGIN_CITY_NAME, y = min_dep), color = "blue")+ geom_point(aes(x = ORIGIN_CITY_NAME, y = max_dep), color = "red") + geom_segment(aes(x = ORIGIN_CITY_NAME, xend = ORIGIN_CITY_NAME, y = min_dep, yend = max_dep)) + coord_flip()
```
